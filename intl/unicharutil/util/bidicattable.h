






















#include "nscore.h" 

static PRUint8 gBidiCatIdx1[256] = {
     11,  
     16,  
     11,  
     17,  
     18,  
     19,  
      5,  
     20,  
     21,  
      1,  
      1,  
     22,  
     21,  
      1,  
      1,  
     23,  
     24,  
     11,  
     11,  
     11,  
     25,  
     26,  
     27,  
     28,  
      1,  
      1,  
     29,  
      1,  
      1,  
      1,  
     29,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
     30,  
     31,  
      9,  
     31,  
      9,  
     32,  
     33,  
      1,  
      1,  
     10,  
     10,  
     10,  
     10,  
     10,  
     10,  
     10,  
     10,  
     10,  
     34,  
      1,  
      1,  
     35,  
      1,  
     36,  
     37,  
     38,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
     39,  
     40,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
     41,  
     42,  
     10,  
     43,  
     10,  
     10,  
     44,  
     45,  
      2,  
      2,  
      2,  
      2,  
      2,  
      2,  
      2,  
      3,  
     46,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
     47,  
     48,  
      3,  
      4,  
     49,  
     50,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
     51,  
     10,  
     52,  
     53,  
      5,  
     54,  
      3,  
     55,  
     56,  
      3,  
      3,  
      3,  
     10,  
     10,  
     10,  
     57,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
     51,  
     10,  
     50,  
      3,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
};

static PRUint8 gBidiCatIdx2[512] = {
     58,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
     59,  
     60,  
     61,  
     62,  
      1,  
     63,  
      1,  
      1,  
      1,  
     64,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
     59,  
     62,  
     65,  
      1,  
      1,  
     63,  
      1,  
     66,  
      1,  
     67,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
     59,  
     68,  
     69,  
      1,  
      1,  
      1,  
      1,  
     40,  
      1,  
     58,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
     59,  
     70,  
     61,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
     64,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
     71,  
     72,  
     65,  
     73,  
      1,  
      1,  
      1,  
      1,  
      1,  
     67,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
     74,  
     65,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
     75,  
     76,  
     77,  
     78,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
     79,  
     73,  
     80,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
     72,  
     65,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
     67,  
     81,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
     82,  
     83,  
     79,  
     34,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
     82,  
     84,  
      1,  
     85,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
     40,  
      1,  
      1,  
     86,  
     87,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
     60,  
     34,  
     88,  
      1,  
     10,  
     60,  
     10,  
     10,  
     10,  
     89,  
     73,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
     90,  
     91,  
     64,  
      1,  
      1,  
      1,  
     40,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
     92,  
      1,  
      1,  
     93,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
     79,  
     85,  
     73,  
     60,  
     94,  
     95,  
      1,  
      1,  
      1,  
      1,  
      9,  
     96,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
     64,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
};

static PRUint8 gBidiCatIdx3[352] = {
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
     97,  
     98,  
     32,  
      1,  
     32,  
      1,  
     32,  
      1,  
     99,  
     14,  
    100,  
      9,  
      9,  
      9,  
    101,  
    102,  
      9,  
    103,  
     33,  
      1,  
      1,  
      1,  
    104,  
    105,  
    106,  
      5,  
    106,  
      1,  
      1,  
      7,  
      7,  
      1,  
      1,  
      1,  
      1,  
     10,  
     10,  
     94,  
      1,  
      1,  
      1,  
    107,  
     98,  
    108,  
    109,  
    110,  
    111,  
     41,  
     41,  
      1,  
      1,  
     22,  
      9,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
    112,  
      1,  
      9,  
      9,  
    113,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
     98,  
      1,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
     33,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
    114,  
      9,  
      9,  
    115,  
    116,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      9,  
      9,  
      9,  
      9,  
    103,  
      1,  
      1,  
      1,  
      9,  
    116,  
      1,  
      1,  
      5,  
      5,  
      5,  
      5,  
      5,  
      5,  
      5,  
    117,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
    118,  
      1,  
      1,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
     33,  
      1,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      1,  
      9,  
      9,  
    112,  
    119,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
     98,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
    120,  
    121,  
      9,  
      9,  
      9,  
    119,  
      9,  
      9,  
      9,  
    110,  
    122,  
    103,  
    119,  
      1,  
    123,  
      9,  
      9,  
      9,  
    124,  
      9,  
      9,  
      9,  
    119,  
    103,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
};

static PRUint8 gBidiCatIdx4[176] = {
      9,  
      9,  
      9,  
     26,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
    112,  
      1,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
      9,  
     33,  
      1,  
      1,  
      1,  
      9,  
    112,  
    125,  
      9,  
      9,  
      9,  
     21,  
    126,  
    109,  
    123,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
    127,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
    128,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
};

static PRUint8 gBidiCatIdx5[160] = {
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      9,  
      9,  
    121,  
      9,  
    129,  
      9,  
    130,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
};

static PRUint8 gBidiCatIdx6[224] = {
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
    131,  
      2,  
    132,  
      2,  
      2,  
      2,  
      2,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
    133,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      1,  
      1,  
      1,  
      1,  
     94,  
      1,  
      9,  
      9,  
    124,  
    119,  
    134,  
    135,  
    136,  
    137,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
      3,  
     55,  
    138,  
     19,  
      5,  
     20,  
     21,  
      1,  
      1,  
     22,  
     21,  
      1,  
      1,  
    139,  
    140,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
      1,  
    141,  
    103,  
      1,  
    142,  
};

static PRUint32 gBidiCatPat[143] = {
    0x00000000,  
    0x11111111,  
    0x22222222,  
    0x33333333,  
    0x44444444,  
    0x55555555,  
    0x66666666,  
    0x77777777,  
    0x88888888,  
    0x99999999,  
    0xAAAAAAAA,  
    0xBBBBBBBB,  
    0xCCCCCCCC,  
    0xDDDDDDDD,  
    0xEEEEEEEE,  
    0xFFFFFFFF,  
    0xBBCEDCDB,  
    0xDCCCBBBB,  
    0x9977799E,  
    0x68787999,  
    0x99999855,  
    0x11111119,  
    0x99999111,  
    0xB9999111,  
    0xBBCBBBBB,  
    0x99777798,  
    0x99999199,  
    0x99195577,  
    0x99999159,  
    0x91111111,  
    0x11111991,  
    0x99999911,  
    0x99911111,  
    0x11999999,  
    0x1AAAAAAA,  
    0x11111AAA,  
    0x11991111,  
    0x19111111,  
    0x91991111,  
    0x1AAAA111,  
    0x111111AA,  
    0x11111911,  
    0xAAAAAAA2,  
    0xAAAAA2AA,  
    0xA2AAA2AA,  
    0x222A2AA2,  
    0x33383333,  
    0xAAAAA333,  
    0x33AAAAAA,  
    0x33344744,  
    0x3333333A,  
    0xAA333333,  
    0xA33AAAAA,  
    0x33AAAA9A,  
    0x33333355,  
    0xB3333333,  
    0x333333A3,  
    0x33333AAA,  
    0x11111AA1,  
    0x111A1111,  
    0xAAAAAAA1,  
    0x11A1111A,  
    0x111AAAA1,  
    0x1111AA11,  
    0x111111A1,  
    0x11A11111,  
    0x11117711,  
    0x11111A11,  
    0xA1111AA1,  
    0x11AAA11A,  
    0xA1AAAAA1,  
    0xA11A1111,  
    0x1111AAA1,  
    0x1A111111,  
    0x1111111A,  
    0xAA111111,  
    0xAA11111A,  
    0x11AAAA1A,  
    0x1AA11111,  
    0xA1111111,  
    0x11AA1111,  
    0x1A1AAA11,  
    0xAAAA11A1,  
    0x71111AAA,  
    0x111AA1AA,  
    0x11AAAAAA,  
    0xA1A11111,  
    0x119999A1,  
    0xAA1AAAAA,  
    0x111AAAAA,  
    0xAAA11111,  
    0xAA111A1A,  
    0x1111111E,  
    0x11199111,  
    0x1111AAAA,  
    0x11117111,  
    0x1BBBB999,  
    0x91911111,  
    0x11111199,  
    0x19911111,  
    0x21BBBEEE,  
    0xEFFFFFCE,  
    0x99977777,  
    0x19999999,  
    0xBBBBBB11,  
    0x55551115,  
    0x19997755,  
    0x19999199,  
    0x99191111,  
    0x99111119,  
    0x91919999,  
    0x17111191,  
    0x11119999,  
    0x99997799,  
    0x99919111,  
    0x99199999,  
    0x11111999,  
    0x11115555,  
    0x11111511,  
    0x99999991,  
    0x99199991,  
    0x99991199,  
    0x19111999,  
    0x99111111,  
    0x11199999,  
    0x1119999E,  
    0xAAAAAA11,  
    0x11199AA1,  
    0x11119111,  
    0x99919999,  
    0x19199919,  
    0x2A211111,  
    0x22222272,  
    0x99333333,  
    0x99891898,  
    0x79999999,  
    0x19997799,  
    0x11119779,  
    0x99777991,  
    0x19999111,  
    0x11999991,  
    0x17799977,  
    0x1199BBB1,  
};

static eBidiCategory GetBidiCat(PRUnichar u)
{
    PRUint32 pat;
    PRUint16 patidx;

       

    
    if (u<=((PRUnichar)0x07FF)) {
        patidx = gBidiCatIdx1 [( u  >> 3 )];
        if (patidx < 0x10)
            return (eBidiCategory)patidx;
        else {
            pat = gBidiCatPat[patidx];
            return (eBidiCategory)((pat  >> ((u % 8) * 4)) & 0x0F);
        }
    }

    
    if ((((PRUnichar)0x0900)<=u)&&(u<=((PRUnichar)0x18FF))) {
        patidx = gBidiCatIdx2 [( (u -(PRUnichar) 0x0900) >> 3 )];
        if (patidx < 0x10)
            return (eBidiCategory)patidx;
        else {
            pat = gBidiCatPat[patidx];
            return (eBidiCategory)((pat  >> ((u % 8) * 4)) & 0x0F);
        }
    }

    
    if ((((PRUnichar)0x1E00)<=u)&&(u<=((PRUnichar)0x28FF))) {
        patidx = gBidiCatIdx3 [( (u -(PRUnichar) 0x1E00) >> 3 )];
        if (patidx < 0x10)
            return (eBidiCategory)patidx;
        else {
            pat = gBidiCatPat[patidx];
            return (eBidiCategory)((pat  >> ((u % 8) * 4)) & 0x0F);
        }
    }

    
    if ((((PRUnichar)0x2E80)<=u)&&(u<=((PRUnichar)0x33FF))) {
        patidx = gBidiCatIdx4 [( (u -(PRUnichar) 0x2E80) >> 3 )];
        if (patidx < 0x10)
            return (eBidiCategory)patidx;
        else {
            pat = gBidiCatPat[patidx];
            return (eBidiCategory)((pat  >> ((u % 8) * 4)) & 0x0F);
        }
    }

    
    if ((((PRUnichar)0xA000)<=u)&&(u<=((PRUnichar)0xA4FF))) {
        patidx = gBidiCatIdx5 [( (u -(PRUnichar) 0xA000) >> 3 )];
        if (patidx < 0x10)
            return (eBidiCategory)patidx;
        else {
            pat = gBidiCatPat[patidx];
            return (eBidiCategory)((pat  >> ((u % 8) * 4)) & 0x0F);
        }
    }

    
    if (((PRUnichar)0xF900)<=u) {
        patidx = gBidiCatIdx6 [( (u -(PRUnichar) 0xF900) >> 3 )];
        if (patidx < 0x10)
            return (eBidiCategory)patidx;
        else {
            pat = gBidiCatPat[patidx];
            return (eBidiCategory)((pat  >> ((u % 8) * 4)) & 0x0F);
        }
    }

    return eBidiCat_L; 
};

