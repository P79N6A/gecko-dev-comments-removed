



#include "mp4_demuxer/video_util.h"

#include <cmath>

namespace mp4_demuxer {

IntSize GetNaturalSize(const IntSize& visible_size,
                       int aspect_ratio_numerator,
                       int aspect_ratio_denominator) {
  if (aspect_ratio_denominator == 0 ||
      aspect_ratio_numerator < 0 ||
      aspect_ratio_denominator < 0)
    return IntSize();

  double aspect_ratio = aspect_ratio_numerator /
      static_cast<double>(aspect_ratio_denominator);

  int width = floor(visible_size.width() * aspect_ratio + 0.5);
  int height = visible_size.height();

  
  
  return IntSize(width & ~1, height);
}














































































































































































































































































}  
