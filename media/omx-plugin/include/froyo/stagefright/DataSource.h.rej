--- stagefright/DataSource.h
+++ stagefright/DataSource.h
@@ -26,12 +26,20 @@
 #include <utils/RefBase.h>
 #include <utils/threads.h>
 
+#if !defined(STAGEFRIGHT_EXPORT)
+#define STAGEFRIGHT_EXPORT
+#endif
+
+#if !defined(MOZ_STAGEFRIGHT_OFF_T)
+#define MOZ_STAGEFRIGHT_OFF_T off64_t
+#endif
+
 namespace android {
 
 struct AMessage;
 class String8;
 
-class DataSource : public RefBase {
+class STAGEFRIGHT_EXPORT DataSource : public RefBase {
 public:
     enum Flags {
         kWantsPrefetching      = 1,
