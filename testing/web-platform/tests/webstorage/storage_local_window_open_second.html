<!DOCTYPE HTML>
<html>
<head>
<title>WebStorage Test: localStorage - second page</title>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
</head>
<body>
<div id="log"></div>
<script>
    test(function() {
        assert_true("localStorage" in window, "localStorage exist");

        var storage = window.localStorage;

        assert_equals(storage.getItem("FOO"), "BAR", "storage.getItem('FOO')");
        storage.setItem("FOO", "BAR-NEWWINDOW");
        assert_equals(storage.getItem("FOO"), "BAR-NEWWINDOW", "value for FOO after changing");

        assert_equals(window.opener.localStorage.getItem("FOO"), "BAR-NEWWINDOW", "value for FOO in my opening window");

    }, "A new window to make sure there is a copy of the previous window's localStorage, and that they diverge after a change");

</script>
</body>
</html>

