<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<panel id="PanelUI-popup"
       role="group"
       type="arrow"
       level="top"
       hidden="true"
       noautofocus="true">
  <panelmultiview id="PanelUI-multiView" mainViewId="PanelUI-mainView">
    <panelview id="PanelUI-mainView" context="customizationPanelContextMenu">
      <vbox id="PanelUI-contents-scroller">
        <vbox id="PanelUI-contents"/>
      </vbox>

      <footer id="PanelUI-footer">
        <!-- The parentNode is used so that the footer is presented as the anchor
             instead of just the button being the anchor. -->
        <toolbarbutton id="PanelUI-customize" label="&appMenuCustomize.label;"
                       exitLabel="&appMenuCustomizeExit.label;" tabindex="0"
                       oncommand="gCustomizeMode.toggle();"/>
        <toolbarbutton id="PanelUI-help" label="&helpMenu.label;" tabindex="0"
                       tooltiptext="&helpMenu.label;"
                       oncommand="PanelUI.showHelpView(this.parentNode);"/>
        <toolbarbutton id="PanelUI-quit" tabindex="0"
#ifdef XP_WIN
                       label="&quitApplicationCmdWin.label;"
                       tooltiptext="&quitApplicationCmdWin.label;"
#else
                       label="&quitApplicationCmd.label;"
                       tooltiptext="&quitApplicationCmd.label;"
#endif
                       command="cmd_quitApplication"/>
      </footer>
    </panelview>

    <panelview id="PanelUI-history" flex="1">
      <label value="&appMenuHistory.label;"/>
      <toolbarbutton id="appMenuClearRecentHistory" tabindex="0"
                     label="&appMenuHistory.clearRecent.label;"
                     command="Tools:Sanitize"/>
      <toolbarbutton id="appMenuRestoreLastSession" tabindex="0"
                     label="&appMenuHistory.restoreSession.label;"
                     command="Browser:RestoreLastSession"/>
      <menuseparator id="PanelUI-recentlyClosedTabs-separator"/>
      <vbox id="PanelUI-recentlyClosedTabs"/>
      <menuseparator id="PanelUI-recentlyClosedWindows-separator"/>
      <vbox id="PanelUI-recentlyClosedWindows"/>
      <menuseparator id="PanelUI-historyItems-separator"/>
      <vbox id="PanelUI-historyItems"/>
      <label value="&appMenuHistory.showAll.label;"
             id="PanelUI-historyMore"
             class="text-link"
             onclick="PlacesCommandHook.showPlacesOrganizer('History'); CustomizableUI.hidePanelForNode(this);"/>
    </panelview>

    <panelview id="PanelUI-bookmarks" flex="1">
      <toolbarbutton id="panelMenuBookmarkThisPage"
                     label="&bookmarkThisPageCmd.label;"
                     command="Browser:AddBookmarkAs"
                     onclick="PanelUI.hide();"/>
      <toolbarseparator/>
      <toolbarbutton id="panelMenu_showAllBookmarks"
                     label="&showAllBookmarks2.label;"
                     command="Browser:ShowAllBookmarks"
                     onclick="PanelUI.hide();"/>
      <toolbarbutton id="panelMenu_viewBookmarksSidebar"
                     label="&viewBookmarksSidebar2.label;"
                     oncommand="toggleSidebar('viewBookmarksSidebar'); PanelUI.hide();">
        <observes element="viewBookmarksSidebar" attribute="checked"/>
      </toolbarbutton>
      <toolbarbutton id="panelMenu_viewBookmarksToolbar"
                     label="&viewBookmarksToolbar.label;"
                     type="checkbox"
                     toolbarId="PersonalToolbar"
                     oncommand="onViewToolbarCommand(event); PanelUI.hide();"/>
      <toolbarseparator/>
      <toolbarbutton id="panelMenu_bookmarksToolbar"
                     label="&personalbarCmd.label;"
                     oncommand="PlacesCommandHook.showPlacesOrganizer('BookmarksToolbar'); PanelUI.hide();"/>
      <toolbarbutton id="panelMenu_unsortedBookmarks"
                     label="&unsortedBookmarksCmd.label;"
                     oncommand="PlacesCommandHook.showPlacesOrganizer('UnfiledBookmarks'); PanelUI.hide();"/>
      <toolbarseparator/>
      <toolbaritem id="panelMenu_bookmarksMenu"
                   flex="1"
                   orient="vertical"
                   smoothscroll="false"
                   onclick="if (event.button == 1) BookmarkingUI.onPanelMenuViewCommand(event, this._placesView);"
                   oncommand="BookmarkingUI.onPanelMenuViewCommand(event, this._placesView);"
                   flatList="true"
                   tooltip="bhTooltip">
        <!-- bookmarks menu items -->
      </toolbaritem>

    </panelview>

    <panelview id="PanelUI-feeds" flex="1" oncommand="FeedHandler.subscribeToFeed(null, event);"></panelview>

    <panelview id="PanelUI-helpView" flex="1">
      <label value="&helpMenu.label;"/>
      <vbox id="PanelUI-helpItems"/>
    </panelview>

    <panelview id="PanelUI-developer" flex="1">
      <label value="&webDeveloperMenu.label;"/>
      <vbox id="PanelUI-developerItems"/>
    </panelview>

    <panelview id="PanelUI-characterEncodingView" flex="1">
      <label value="&charsetMenu.label;"/>

      <vbox id="PanelUI-characterEncodingView-customlist"
            class="PanelUI-characterEncodingView-list"/>
      <vbox>
        <label value="&charsetMenuAutodet.label;"/>
        <vbox id="PanelUI-characterEncodingView-autodetect"
              class="PanelUI-characterEncodingView-list"/>
      </vbox>
    </panelview>

  </panelmultiview>
  <!-- These menupopups are located here to prevent flickering,
       see bug 492960 comment 20. -->
  <menupopup id="customizationPanelItemContextMenu">
    <menuitem oncommand="gCustomizeMode.addToToolbar(document.popupNode)"
              class="customize-context-addToToolbar"
              accesskey="&customizeMenu.addToToolbar.accesskey;"
              label="&customizeMenu.addToToolbar.label;"/>
    <menuitem oncommand="gCustomizeMode.removeFromArea(document.popupNode)"
              class="customize-context-removeFromPanel"
              accesskey="&customizeMenu.removeFromMenu.accesskey;"
              label="&customizeMenu.removeFromMenu.label;"/>
    <menuseparator/>
    <menuitem command="cmd_CustomizeToolbars"
              class="viewCustomizeToolbar"
              accesskey="&viewCustomizeToolbar.accesskey;"
              label="&viewCustomizeToolbar.label;"/>
  </menupopup>

  <menupopup id="customizationPaletteItemContextMenu">
    <menuitem oncommand="gCustomizeMode.addToToolbar(document.popupNode)"
              class="customize-context-addToToolbar"
              accesskey="&customizeMenu.addToToolbar.accesskey;"
              label="&customizeMenu.addToToolbar.label;"/>
    <menuitem oncommand="gCustomizeMode.addToPanel(document.popupNode)"
              class="customize-context-addToPanel"
              accesskey="&customizeMenu.addToPanel.accesskey;"
              label="&customizeMenu.addToPanel.label;"/>
  </menupopup>

  <menupopup id="customizationPanelContextMenu">
    <menuitem command="cmd_CustomizeToolbars"
              accesskey="&customizeMenu.addMoreItems.accesskey;"
              label="&customizeMenu.addMoreItems.label;"/>
  </menupopup>
</panel>

<panel id="widget-overflow"
       role="group"
       type="arrow"
       level="top"
       hidden="true"
       consumeoutsideclicks="true">
  <vbox id="widget-overflow-scroller">
    <vbox id="widget-overflow-list"/>
  </vbox>
</panel>
